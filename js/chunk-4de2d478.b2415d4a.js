(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4de2d478"],{7088:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{align:"center"}},[e._m(0),n("table",{attrs:{align:"center"}},[n("tr",[e._m(1),n("td",[n("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)]),n("tr",[e._m(2),n("td",[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),e.needEnsure?n("tr",[e._m(3),n("td",[n("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.ensure_password,callback:function(t){e.ensure_password=t},expression:"ensure_password"}})],1)]):e._e(),n("tr",[n("td"),n("td",{attrs:{align:"right"}},[e.needEnsure?e._e():n("el-button",{attrs:{type:"primary"},on:{click:e.onLogin}},[e._v(e._s(e.loginButtonText))]),e.needEnsure?n("el-button",{attrs:{type:"primary"},on:{click:e.doRegister}},[e._v(e._s(e.registerButtonText))]):e._e()],1)]),n("tr",[n("td"),n("td",{attrs:{align:"right"}},[e.needEnsure?n("el-button",{attrs:{type:"text"},on:{click:e.showLogin}},[e._v(e._s(e.loginButtonText))]):e._e(),e.needEnsure?e._e():n("el-button",{attrs:{type:"text"},on:{click:e.onRegister}},[e._v(e._s(e.registerButtonText))]),n("el-button",{attrs:{type:"text"},on:{click:e.onForgetPassword}},[e._v("忘记密码")])],1)])])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{align:"center"}},[n("h2",[e._v("欢迎来到爱我中华自助平台")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("span",[e._v("用户名：")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("span",[e._v("密码：")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("span",[e._v("确认密码：")])])}],r=(n("cadf"),n("551c"),n("097d"),n("bc3a")),o=n.n(r),i=n("4328"),c=n.n(i),d=n("5c96"),l={name:"User",data:function(){return{loginButtonText:"登录",registerButtonText:"注册",needEnsure:!1,ensure_password:"",username:"",password:""}},methods:{showLogin:function(){this.$set(this,"needEnsure",!1)},onLogin:function(){var e=this,t=o.a.create({headers:{"content-type":"application/x-www-form-urlencoded"},withCredentials:!0});t.post(this.Server.api.user.login,c.a.stringify({username:this.username,password:this.password})).then(function(t){if(200==t.data.code){window.localStorage.setItem("username",t.data.username),window.localStorage.setItem("type",t.data.type);var n=(new Date).getTime();if(window.localStorage.setItem("time",n),void 0!=window.android){if(0==t.data.type){var s="local://navigator/manager?tabs="+encodeURIComponent(e.Server.page.manager.member+","+e.Server.page.manager.system+","+e.Server.page.manager.statics);console.log(s),android.navigateTo(s)}console.log("login time="+n),android.onLogin(t.data.username,t.data.type,""+n),window.location=window.location.origin+"/#/manager_page?page=MemberManage"}else window.location=window.location.origin+"/#/manager"}else Object(d["Message"])({showClose:!0,message:t.data.msg,type:"error",duration:2e3})}).catch(function(e){console.log(e)})},doRegister:function(){if(this.password!=this.ensure_password)Object(d["Message"])({showClose:!0,message:"两次密码不一致",type:"error",duration:2e3});else{var e=this,t=o.a.create({headers:{"content-type":"application/x-www-form-urlencoded"},withCredentials:!0});t.post(this.Server.api.user.register,c.a.stringify({username:this.username,password:this.password})).then(function(t){200==t.data.code?(Object(d["Message"])({showClose:!0,message:t.data.msg,type:"success",duration:2e3}),e.showLogin()):Object(d["Message"])({showClose:!0,message:t.data.msg,type:"error",duration:2e3})}).catch(function(e){console.log(e)})}},onRegister:function(){this.$set(this,"needEnsure",!0)},onForgetPassword:function(){alert("请联系管理员！")}}},u=l,p=(n("8b79"),n("2877")),g=Object(p["a"])(u,s,a,!1,null,"94dc0310",null);g.options.__file="User.vue";t["default"]=g.exports},"79ca":function(e,t,n){},"8b79":function(e,t,n){"use strict";var s=n("79ca"),a=n.n(s);a.a}}]);
//# sourceMappingURL=chunk-4de2d478.b2415d4a.js.map