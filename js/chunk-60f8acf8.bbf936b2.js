(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60f8acf8"],{"81d3":function(e,t,a){},"8f81":function(e,t,a){"use strict";var o=a("81d3"),s=a.n(o);s.a},cd16:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{align:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onRefesh}},[e._v("刷新")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onAddManager}},[e._v("增加管理员")])],1),a("el-table",{staticStyle:{"margin-top":"20px",position:"relative",overflow:"auto"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"username",align:"center",label:"用户名","max-width":"100","min-width":"80"}}),a("el-table-column",{attrs:{prop:"password",label:"密码",align:"center","max-width":"100","min-width":"80"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",formatter:e.formatType,align:"center","max-width":"80","min-width":"80"}}),a("el-table-column",{attrs:{prop:"state",label:"状态",formatter:e.formatState,align:"center","max-width":"80","min-width":"80"}}),a("el-table-column",{attrs:{prop:"time",label:"注册时间",align:"center","min-width":"180"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.onReview(t.row)}}},[e._v("审核")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.onDisable(t.row)}}},[e._v("停用")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.onEdit(t.row)}}},[e._v("编辑")])]}}])})],1),a("el-dialog",{ref:"addDialog",attrs:{title:"增加管理员",visible:e.addDialogFormVisible,width:"80%"},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"username"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("addForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{ref:"modifyDialog",attrs:{title:"修改管理信息",visible:e.dialogFormVisible,width:"90%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"username"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},s=[],r=a("bc3a"),i=a.n(r),n=a("4328"),l=a.n(n),d=a("5c96");var m={methods:{onRefesh:function(){var e=this,t=i.a.create({headers:{"content-type":"application/x-www-form-urlencoded"},withCredentials:!0});t.get(this.Server.api.manager.list).then(function(t){200==t.data.code&&e.$set(e,"tableData",t.data.data)}).catch(function(e){console.log(e)})},onAddManager:function(){this.$set(this,"addDialogFormVisible",!0)},onReview:function(e){if(console.log(e),1==e.state){var t=this,a=i.a.create({headers:{"content-type":"application/x-www-form-urlencoded"},withCredentials:!0});a.post(this.Server.api.manager.active,l.a.stringify({username:e.username})).then(function(a){200==a.data.code?(Object(d["Message"])({showClose:!0,message:a.data.msg,type:"success",duration:2e3}),e.state="2",t.$set(t,"tableData",t.tableData)):Object(d["Message"])({showClose:!0,message:a.data.msg,type:"error",duration:2e3})}).catch(function(e){console.log(e)})}else 2==e.state&&Object(d["Message"])({showClose:!0,message:"已审核",type:"success",duration:1e3})},onDisable:function(e){var t=this,a=i.a.create({headers:{"content-type":"application/x-www-form-urlencoded"},withCredentials:!0});a.post(this.Server.api.manager.disable,l.a.stringify({username:e.username})).then(function(a){200==a.data.code?(Object(d["Message"])({showClose:!0,message:a.data.msg,type:"success",duration:2e3}),e.state="1",t.$set(t,"tableData",t.tableData)):Object(d["Message"])({showClose:!0,message:a.data.msg,type:"error",duration:2e3})}).catch(function(e){console.log(e)})},onEdit:function(e){this.$set(this,"dialogFormVisible",!0),this.form.id=e.id,this.form.username=e.username,this.form.password=e.password,this.$set(this,"form",this.form)},doEdit:function(){var e=this,t=i.a.create({headers:{"content-type":"application/x-www-form-urlencoded"},withCredentials:!0});t.post(this.Server.api.manager.edit,l.a.stringify({id:this.form.id,username:this.form.username,password:this.form.password})).then(function(t){if(200==t.data.code){Object(d["Message"])({showClose:!0,message:t.data.msg,type:"success",duration:2e3});for(var a=0;a<e.tableData.length;a++){var o=e.tableData[a];if(o.id==e.form.id){o.username=e.form.username,o.password=e.form.password;break}}e.$set(e,"tableData",e.tableData)}else Object(d["Message"])({showClose:!0,message:t.data.msg,type:"error",duration:2e3})}).catch(function(e){console.log(e)})},addManager:function(){var e=this,t=i.a.create({headers:{"content-type":"application/x-www-form-urlencoded"},withCredentials:!0});t.post(this.Server.api.manager.add,l.a.stringify({username:this.form.username,password:this.form.password})).then(function(t){200==t.data.code?(Object(d["Message"])({showClose:!0,message:t.data.msg,type:"success",duration:2e3}),e.$set(e,"addDialogFormVisible",!1),e.onRefesh()):Object(d["Message"])({showClose:!0,message:t.data.msg,type:"error",duration:2e3})}).catch(function(e){console.log(e)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"form"==e?t.doEdit():"addForm"==e&&t.addManager(),t.$set(t,"dialogFormVisible",!1)})},formatType:function(e,t){return 0==e.type?"超级管理员":1==e.type?"管理员":"未知"},formatState:function(e,t){return"1"==e.state?"未审核":"2"==e.state?"已审核":"未知状态"}},data:function(){return{formLabelWidth:"80px",dialogFormVisible:!1,addDialogFormVisible:!1,tableData:[],form:{id:"",username:"",password:""},rules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]}}},mounted:function(){this.onRefesh()}},c=m,u=(a("8f81"),a("2877")),f=Object(u["a"])(c,o,s,!1,null,null,null);f.options.__file="SystemManage.vue";t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-60f8acf8.bbf936b2.js.map